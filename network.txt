-------------------------------------概念---------------------------------------------------
*网络=结点（计算机、集线器、路由器、交换机）+ 链路
*电路交换：比特流直达
*报文交换：整个报文传送到相邻结点，储存下来根据转发表转发下一个结点
*分组交换：报文――数据段―――数据段添加首部――分组
*WAN MAN LAN PAN
*bit/s=b/s=bps
*1K=1000 M G T P E Z
*1MB = 2**20B
*带宽（Hz、bit/s）吞吐量（Gbit/s）时延（发送、传播、处理、排队）时延带宽积 往返时间
*TCP/IP体系结构：网络接口层、网际层、运输层、应用层
*应用层：进程通信，报文，DNS,HTTP,SMTP
*运输层：TCP报文段,UDP用户数据报
*网络层：IP数据报
*数据链路层：IP数据包组装成帧
*物理层：比特
*实体（硬件或软件进程）协议（对等实体）服务（上层看得见的功能）服务访问点SAP（相邻两层实体交互）
-------------------------------------物理层---------------------------------------------------
*信道：单工，半双工，全双工
*信号：模拟信号，数字信号。代表数字信号不同离散数值的基本波形称为码元。
*双绞线：3,4,5类线(100MHz，传输速率不超100Mbit/s),5E,6,7
*同轴电缆
*光纤：100Gbit/s
*信道复用：频分复用，时分复用，统计时分复用，波分复用，码分复用
*ADSL非对称数字用户线 光纤同轴混合网 光纤到户
------------------------------------数据链路层-----------------------------------------------
*以太网标准：DIX Ethernet V2, 802.3
*以太网就是局域网，无连接，数据帧不编号，不需确认帧，差错帧丢弃，
*电磁波在1km电缆传播时延5μs
*信道：点对点，广播
*协议数据单元：帧
*基本问题：封装成帧（IP数据报加首部和尾部），透明传输（转义字符），差错检测（循环冗余校验CRC，帧检验序列FCS）
*最大传送单元MTU（1500字节）:帧的数据部分长度上限   帧界定符：控制字符
*点对点协议PPP：用户和ISP通信。封装成帧，支持多种网络层协议、链路，差错检测，检测连接状态，MTU，网络层地址协商。
*数据链路层分为：逻辑链路控制LLC子层，媒体接入控制MAC子层。LLC已消失
*适配器：NIC+存储器（RAM+ROM）+处理器。和局域网以电缆或双绞线串行传输，和主板以I/O总线并行传输。硬件地址在适配器的ROM中，IP地址在存储器中。
*帧：单播帧，广播帧，多播帧
*CSMA/CD载波监听多点接入/碰撞检测：总线型，半双工。 争用期：51.2μs
*集线器：物理上星形网，逻辑上总线网。多接口，RJ-45插头，两对双绞线与适配器相连。工作在物理层，不进行碰撞检测
*MAC地址：48位，ROM
*MAC帧：目的地址(6)+源地址(6)+类型(2,说明上层协议)+数据(46~1500)+FCS(4) 。有效MAC帧长度在64~1518字节。
*物理层扩展以太网：集线器。不能分隔冲突域。
*数据链路层扩展以太网：网桥转发和过滤。二层交换机，星型，实质多接口网桥，全双工，隔离冲突域，存储转发（帧交换表）。
*VLAN：虚拟局域网是由一些局域网网段构成的与物理位置无关的逻辑组。以太网的帧格式中在源地址后插入4字节的VLAN标记，称为802.1Q帧，最大帧长从1518变为1522
*100BASE-T以太网：双绞线100Mbit/s，半双工或全双工
* 1000BASE-X以太网：1Gbit/s,半双工或全双工
*10GE只有全双工模式
*PPPoE为宽带上网的主机使用的链路层协议
*抓包长度 = 源MAC（6）+目的MAC（6）+长度/类型（2字节）+MTU
------------------------------------------------网络层------------------------------------------
*虚电路：网络保证通信可靠，虚电路号，同一路由，顺序到达
*IGMP网际组管理协议：让连接在本地局域网的路由器知道本局域网是否有主机加入或退出多播组。IGMP报文加IP首部构成IP数据报
*多播路由选择协议：洪泛和剪除、隧道技术、基于核心的转发技术
*专用地址只能用作本地地址而不能作为全球地址，路由器对目的地址是专用地址的数据报不转发。A:10.0.0.0 - 10.255.255.255		B:172.16.0.0-172.31.255.255		C:192.168.0.0-192.168.255.255
*虚拟专用网VPN：利用公用互联网作为机构专用网载体，IP隧道技术。内联网vpn，外联网vpn，远程接入vpn。
*网络地址转换NAT：NAT路由器至少有一个全球IP地址。使用端口号的NAT叫网络地址与端口号转换NAPT。
*多协议标记转换MPLS：面向连接，平衡网络负载，支持VPN。对打上标记的IP数据报用硬件转发。
*专用地址只能用作本地地址而不能作为全球地址，路由器对目的地址是专用地址的数据报不转发。A:10.0.0.0 - 10.255.255.255		B:172.16.0.0-172.31.255.255		C:192.168.0.0-192.168.255.255
*虚拟专用网VPN：利用公用互联网作为机构专用网载体，IP隧道技术。内联网vpn，外联网vpn，远程接入vpn。
*网络地址转换NAT：NAT路由器至少有一个全球IP地址。使用端口号的NAT叫网络地址与端口号转换NAPT。
*多协议标记转换MPLS：面向连接，平衡网络负载，支持VPN。对打上标记的IP数据报用硬件转发。
--------------------------------------运输层------------------------------------------------
*端到端通信是进程通信
*硬件端口 软件端口（协议进程与运输实体交互）
*服务器端口号（熟知端口号0~1023，登记端口号1024～49151） 客户端端口号49152～65535
*UDP：无连接、面向报文、无拥塞控制、一对一、一对多、多对多
*TCP:面向连接,点对点，全双工，面向字节流
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*
*****************
